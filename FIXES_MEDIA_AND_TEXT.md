# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è: –ú–µ–¥–∏–∞, –ê–≤—Ç–æ—Ç–µ–∫–∞ –∏ –¶–µ–Ω–∞

## –ü—Ä–æ–±–ª–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã

### ‚úÖ 1. –£–±—Ä–∞–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∞–≤—Ç–æ—Ç–µ–∫–µ –µ—Å–ª–∏ —Å—Ç–∞—Ç—É—Å unknown
**–ë—ã–ª–æ:**
```
üìä –ò—Å—Ç–æ—Ä–∏—è –∞–≤—Ç–æ–º–æ–±–∏–ª—è:
‚Ä¢ –í–ª–∞–¥–µ–ª—å—Ü–µ–≤: 2 –≤–ª–∞–¥–µ–ª—å—Ü–∞
‚Ä¢ –ü—Ä–æ–±–µ–≥: 150 000 –∫–º
‚Ä¢ –ê–≤—Ç–æ—Ç–µ–∫–∞: ‚ùì –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–ª–∞—Å—å
```

**–°—Ç–∞–ª–æ:**
```
üìä –ò—Å—Ç–æ—Ä–∏—è –∞–≤—Ç–æ–º–æ–±–∏–ª—è:
‚Ä¢ –í–ª–∞–¥–µ–ª—å—Ü–µ–≤: 2 –≤–ª–∞–¥–µ–ª—å—Ü–∞
‚Ä¢ –ü—Ä–æ–±–µ–≥: 150 000 –∫–º
(–ê–≤—Ç–æ—Ç–µ–∫–∞ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –µ—Å–ª–∏ unknown)
```

### ‚úÖ 2. –£–±—Ä–∞–Ω–∞ –¥—É–±–ª–∏—Ä—É—é—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∏–∑ AI –æ–ø–∏—Å–∞–Ω–∏—è
**–ë—ã–ª–æ (AI –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–ª):**
```
‚öôÔ∏è –ö–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è:
BMW 3 —Å–µ—Ä–∏–∏, 2.5–ª –∞–≤—Ç–æ–º–∞—Ç. –ü—Ä–æ–±–µ–≥ 150 —Ç—ã—Å. –∫–º, 
2 –≤–ª–∞–¥–µ–ª—å—Ü–∞, —á–∏—Å—Ç–∞—è –∞–≤—Ç–æ—Ç–µ–∫–∞. –ü–æ–ª–Ω–∞—è –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è...
–¶–µ–Ω–∞: 850 000‚ÇΩ
```

**–°—Ç–∞–ª–æ (AI –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ç–æ–ª—å–∫–æ –æ–ø—Ü–∏–∏):**
```
‚öôÔ∏è –ö–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è:
–ü–æ–ª–Ω–∞—è –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è, –∫–æ–∂–∞–Ω—ã–π —Å–∞–ª–æ–Ω, –ø–∞–Ω–æ—Ä–∞–º–Ω–∞—è –∫—Ä—ã—à–∞.
```

### ‚úÖ 3. –û–±–Ω–æ–≤–ª–µ–Ω –ø—Ä–æ–º–ø—Ç AI –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `prompts.py`:**
- AI —Ç–µ–ø–µ—Ä—å –ù–ï –≤–∫–ª—é—á–∞–µ—Ç: –º–∞—Ä–∫—É, –º–æ–¥–µ–ª—å, –≥–æ–¥, –æ–±—ä–µ–º, –ö–ü–ü, –ø—Ä–æ–±–µ–≥, –≤–ª–∞–¥–µ–ª—å—Ü–µ–≤, –∞–≤—Ç–æ—Ç–µ–∫—É, —Ü–µ–Ω—É
- –≠—Ç–æ –≤—Å–µ –≤—ã–≤–æ–¥–∏—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω—ã–º–∏ –±–ª–æ–∫–∞–º–∏
- AI –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –¢–û–õ–¨–ö–û –æ–ø–∏—Å–∞–Ω–∏–µ –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏–∏ –∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π
- –î–ª–∏–Ω–∞ —Å–æ–∫—Ä–∞—â–µ–Ω–∞ –¥–æ 50-100 —Å–ª–æ–≤ (–±—ã–ª–æ 100-500)

**–ù–æ–≤—ã–π –ø—Ä–æ–º–ø—Ç —è–≤–Ω–æ –∑–∞–ø—Ä–µ—â–∞–µ—Ç:**
```
–ó–ê–ü–†–ï–©–ï–ù–û –í–ö–õ–Æ–ß–ê–¢–¨ (—ç—Ç–æ –≤—ã–≤–æ–¥–∏—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ):
‚úó –ú–∞—Ä–∫–∞, –º–æ–¥–µ–ª—å, –≥–æ–¥ (–≤—ã–≤–æ–¥—è—Ç—Å—è –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ)
‚úó –û–±—ä–µ–º –¥–≤–∏–≥–∞—Ç–µ–ª—è, –ö–ü–ü (–≤—ã–≤–æ–¥—è—Ç—Å—è –≤ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞—Ö)
‚úó –ü—Ä–æ–±–µ–≥ –∏ –≤–ª–∞–¥–µ–ª—å—Ü—ã (–≤—ã–≤–æ–¥—è—Ç—Å—è –≤ –∏—Å—Ç–æ—Ä–∏–∏)
‚úó –ê–≤—Ç–æ—Ç–µ–∫–∞ (–≤—ã–≤–æ–¥–∏—Ç—Å—è –≤ –∏—Å—Ç–æ—Ä–∏–∏)
‚úó –¶–µ–Ω–∞ (–≤—ã–≤–æ–¥–∏—Ç—Å—è –≤–Ω–∏–∑—É –æ—Ç–¥–µ–ª—å–Ω–æ)
```

### ‚úÖ 4. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏—è —Ñ–æ—Ç–æ

**–ë—ã–ª–æ:**
- –§–æ—Ç–æ –∫–æ–ø–∏—Ä–æ–≤–∞–ª–æ—Å—å —Å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–º —Ç–µ–∫—Å—Ç–æ–º
- –ù–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç —Ç–µ—Ä—è–ª—Å—è

**–°—Ç–∞–ª–æ:**
- –§–æ—Ç–æ –∫–æ–ø–∏—Ä—É–µ—Ç—Å—è –ë–ï–ó —Ç–µ–∫—Å—Ç–∞ (caption="")
- –ù–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ —Ñ–æ—Ç–æ
- –ö–Ω–æ–ø–∫–∞ "–ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç—ã" –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–∞ –∫ —Ç–µ–∫—Å—Ç—É

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏:**
```
[–°–æ–æ–±—â–µ–Ω–∏–µ 1: –§–æ—Ç–æ –±–µ–∑ —Ç–µ–∫—Å—Ç–∞]
[–°–æ–æ–±—â–µ–Ω–∏–µ 2: –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç + –∫–Ω–æ–ø–∫–∞]
```

## ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ: –ú–µ–¥–∏–∞-–≥—Ä—É–ø–ø—ã (–Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ–æ—Ç–æ/–≤–∏–¥–µ–æ)

**–¢–µ–∫—É—â–µ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
- –ï—Å–ª–∏ –≤ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–º –ø–æ—Å—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ–æ—Ç–æ (–º–µ–¥–∏–∞-–≥—Ä—É–ø–ø–∞), –∫–æ–ø–∏—Ä—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ **–ø–µ—Ä–≤–æ–µ —Ñ–æ—Ç–æ**
- –≠—Ç–æ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ Telegram API

**–ü–æ—á–µ–º—É —Ç–∞–∫ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
1. Telegram –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –º–µ–¥–∏–∞-–≥—Ä—É–ø–ø—É –∫–∞–∫ –Ω–µ—Å–∫–æ–ª—å–∫–æ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π —Å –æ–±—â–∏–º `grouped_id`
2. `copy_message` –∫–æ–ø–∏—Ä—É–µ—Ç —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ
3. –î–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Å–µ–π –≥—Ä—É–ø–ø—ã –Ω—É–∂–Ω–æ:
   - –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å `grouped_id` –≤ –º–æ–Ω–∏—Ç–æ—Ä–µ
   - –°–æ–±–∏—Ä–∞—Ç—å –≤—Å–µ message_id –∏–∑ –≥—Ä—É–ø–ø—ã
   - –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∂–¥–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–¥–µ–ª—å–Ω–æ
   - –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `send_media_group` —Å —Å–∫–∞—á–∞–Ω–Ω—ã–º–∏ –º–µ–¥–∏–∞

**–ë—É–¥—É—â–µ–µ —Ä–µ—à–µ–Ω–∏–µ:**
–≠—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–π –¥–æ—Ä–∞–±–æ—Ç–∫–∏ –º–æ–Ω–∏—Ç–æ—Ä–∞ –∏ —Å–∏—Å—Ç–µ–º—ã —Ö—Ä–∞–Ω–µ–Ω–∏—è. –í–æ–∑–º–æ–∂–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã:
1. –°–æ—Ö—Ä–∞–Ω—è—Ç—å –≤—Å–µ message_id –∏–∑ –º–µ–¥–∏–∞-–≥—Ä—É–ø–ø—ã
2. –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≥—Ä—É–ø–ø—ã
3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å forward_message (–Ω–æ –ø–æ–∫–∞–∂–µ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫)

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ—Å—Ç–∞

```
üöó BMW 3 —Å–µ—Ä–∏–∏
üìã 2.5–ª ‚Ä¢ –ê–≤—Ç–æ–º–∞—Ç ‚Ä¢ 2008

üìä –ò—Å—Ç–æ—Ä–∏—è –∞–≤—Ç–æ–º–æ–±–∏–ª—è:
‚Ä¢ –í–ª–∞–¥–µ–ª—å—Ü–µ–≤: 2 –≤–ª–∞–¥–µ–ª—å—Ü–∞
‚Ä¢ –ü—Ä–æ–±–µ–≥: 150 000 –∫–º
(–ê–≤—Ç–æ—Ç–µ–∫–∞ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ GREEN –∏–ª–∏ HAS_ACCIDENTS)

‚öôÔ∏è –ö–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è:
–ü–æ–ª–Ω–∞—è –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è, –∫–æ–∂–∞–Ω—ã–π —Å–∞–ª–æ–Ω, –ø–∞–Ω–æ—Ä–∞–º–Ω–∞—è –∫—Ä—ã—à–∞.

üí∞ –¶–µ–Ω–∞: 850 000‚ÇΩ

[–ö–Ω–æ–ø–∫–∞: –ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç—ã üìû]
```

## –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. **src/cars_bot/publishing/service.py**
   - `_format_history()` - –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –∞–≤—Ç–æ—Ç–µ–∫—É –µ—Å–ª–∏ unknown
   - `_copy_original_message_with_text()` - –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–æ—Ç–æ –±–µ–∑ —Ç–µ–∫—Å—Ç–∞

2. **src/cars_bot/ai/prompts.py**
   - `GENERATE_DESCRIPTION_SYSTEM_PROMPT` - –Ω–æ–≤—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
   - `GENERATION_FEW_SHOT_EXAMPLES` - –æ–±–Ω–æ–≤–ª–µ–Ω –ø—Ä–∏–º–µ—Ä

## –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
./scripts/stop_celery.sh
./scripts/start_celery_worker.sh
./scripts/start_celery_beat.sh
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

1. ‚úÖ –ù–æ–≤—ã–µ –ø–æ—Å—Ç—ã –ø—É–±–ª–∏–∫—É—é—Ç—Å—è —Å —Ñ–æ—Ç–æ
2. ‚úÖ –û–ø–∏—Å–∞–Ω–∏–µ –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏–∏ –∫—Ä–∞—Ç–∫–æ–µ (–±–µ–∑ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è)
3. ‚úÖ –ê–≤—Ç–æ—Ç–µ–∫–∞ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –µ—Å–ª–∏ unknown
4. ‚úÖ –¶–µ–Ω–∞ –Ω–µ –¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è –≤ –æ–ø–∏—Å–∞–Ω–∏–∏
5. ‚ö†Ô∏è –ò–∑ –º–µ–¥–∏–∞-–≥—Ä—É–ø–ø—ã –∫–æ–ø–∏—Ä—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤–æ–µ —Ñ–æ—Ç–æ (–∏–∑–≤–µ—Å—Ç–Ω–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ)

## –ü—Ä–∏–º–µ—Ä—ã –¥–æ/–ø–æ—Å–ª–µ

### –ü—Ä–∏–º–µ—Ä 1: –û–¥–Ω–æ —Ñ–æ—Ç–æ

**–û—Ä–∏–≥–∏–Ω–∞–ª:**
```
–ü—Ä–æ–¥–∞–º BMW 3 —Å–µ—Ä–∏–∏ 2008, 2.5 –∞–≤—Ç–æ–º–∞—Ç. 
–ü—Ä–æ–±–µ–≥ 150–∫, 2 –≤–ª–∞–¥–µ–ª—å—Ü–∞. 
–ü–æ–ª–Ω–∞—è –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è, –∫–æ–∂–∞, –ø–∞–Ω–æ—Ä–∞–º–∞. 
–¶–µ–Ω–∞ 850–∫. @seller
[1 —Ñ–æ—Ç–æ]
```

**–û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ:**
```
[–§–æ—Ç–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ]

üöó BMW 3 —Å–µ—Ä–∏–∏
üìã 2.5–ª ‚Ä¢ –ê–≤—Ç–æ–º–∞—Ç ‚Ä¢ 2008

üìä –ò—Å—Ç–æ—Ä–∏—è –∞–≤—Ç–æ–º–æ–±–∏–ª—è:
‚Ä¢ –í–ª–∞–¥–µ–ª—å—Ü–µ–≤: 2 –≤–ª–∞–¥–µ–ª—å—Ü–∞
‚Ä¢ –ü—Ä–æ–±–µ–≥: 150 000 –∫–º

‚öôÔ∏è –ö–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è:
–ü–æ–ª–Ω–∞—è –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è, –∫–æ–∂–∞–Ω—ã–π —Å–∞–ª–æ–Ω, –ø–∞–Ω–æ—Ä–∞–º–Ω–∞—è –∫—Ä—ã—à–∞.

üí∞ –¶–µ–Ω–∞: 850 000‚ÇΩ

[–ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç—ã üìû]
```

### –ü—Ä–∏–º–µ—Ä 2: –ë–µ–∑ –∞–≤—Ç–æ—Ç–µ–∫–∏

**–û—Ä–∏–≥–∏–Ω–∞–ª (–±–µ–∑ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –∞–≤—Ç–æ—Ç–µ–∫–µ):**
```
Mercedes E-–∫–ª–∞—Å—Å 2015, –¥–∏–∑–µ–ª—å. 
–ü—Ä–æ–±–µ–≥ 80–∫, –º–∞–∫—Å –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è AMG.
[1 —Ñ–æ—Ç–æ]
```

**–û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ:**
```
[–§–æ—Ç–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ]

üöó Mercedes E-–∫–ª–∞—Å—Å
üìã ‚Ä¢ ‚Ä¢ 2015

üìä –ò—Å—Ç–æ—Ä–∏—è –∞–≤—Ç–æ–º–æ–±–∏–ª—è:
‚Ä¢ –ü—Ä–æ–±–µ–≥: 80 000 –∫–º
(–ê–≤—Ç–æ—Ç–µ–∫–∞ –Ω–µ —É–ø–æ–º–∏–Ω–∞–µ—Ç—Å—è)

‚öôÔ∏è –ö–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è:
–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è AMG.

üí∞ –¶–µ–Ω–∞: —É—Ç–æ—á–Ω—è–µ—Ç—Å—è
```

